<div
    class="min-h-full group/item rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800  hover:border-greens-800 hover:shadow-xl  transition-all duration-300 ease-in-out">
    <div class="relative">
        <div *ngIf="data.etiquette === 'Sale' || data.etiquette === 'Hot'"
            class="absolute top-0 start-0 flex items-center justify-center px-1.5 py-0.5 text-whites bg-reds rounded-md">
            <span class="text-bigSmall font-medium text-primary-800 dark:bg-primary-900 dark:text-primary-300">
                {{data.etiquette}}
            </span>
        </div>
        <div *ngIf="data.etiquette === '14%' "
            class="absolute top-0 start-0 flex items-center justify-center px-1.5 py-0.5 text-whites bg-green-pal rounded-md">
            <span class="text-bigSmall font-medium text-primary-800 dark:bg-primary-900 dark:text-primary-300">
                {{data.etiquette}}
            </span>
        </div>
        <a href="#">
            <img class="mx-auto h-full dark:hidden" [src]="data.img[0]" alt="" />
        </a>
        <div
            class=" group/edit opacity-0  group-hover/item:opacity-100 absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2 mb-4 flex items-center justify-between gap-4 transition-opacity duration-500">
            <div class="flex items-center justify-end gap-1">
                <button type="button" [attr.data-tooltip-target]="'tooltip-quick-look' + data.id" (click)="this.view(data)"
                    class="bg-whites shadow-md rounded-lg p-2 text-gray-500 hover:bg-greens-800 hover:text-whites dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
                    <span class="sr-only"> Quick View </span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    </svg>
                </button>
                <!-- Modal toggle -->
                <div [attr.id]="'tooltip-quick-look' + data.id" role="tooltip"
                    class="tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-2 py-1 text-small font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700"
                    data-popper-placement="top">
                    Quick View
                    <div class="tooltip-arrow" data-popper-arrow=""></div>
                </div>

                <button type="button" [attr.data-tooltip-target]="'tooltip-add-to-favorites' + data.id" (click)="toggleAddFavorie(data)"
                    class="bg-whites shadow-md rounded-lg p-2 text-gray-500 hover:bg-greens-800 hover:text-whites dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
                    <span class="sr-only"> Add to Favorites </span>
                    @if (isInFavorie(data)) {
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 stroke-reds text-reds">
                            <path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
                        </svg>                          
                    }@else {
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                        </svg>
                    }
                </button>
                <div [attr.id]="'tooltip-add-to-favorites' + data.id" role="tooltip"
                    class="tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-2 py-1 text-small font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700"
                    data-popper-placement="top">
                    Whishlist
                    <div class="tooltip-arrow" data-popper-arrow=""></div>
                </div>
                <button type="button" [attr.data-tooltip-target]="'compare' + data.id"
                    class="bg-whites shadow-md rounded-lg p-2 text-gray-500 hover:bg-greens-800 hover:text-whites dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
                    <span class="sr-only"> Compare </span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4">
                        <path fill-rule="evenodd"
                            d="M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z"
                            clip-rule="evenodd" />
                    </svg>

                </button>
                <div [attr.id]="'compare' + data.id" role="tooltip"
                    class="tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-2 py-1 text-small font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700"
                    data-popper-placement="top">
                    Compare
                    <div class="tooltip-arrow" data-popper-arrow=""></div>
                </div>
            </div>
        </div>
    </div>
    <div class="pt-6">
        <div>
            <small class="text-small font-medium text-gray-500 dark:text-gray-400">{{data.categorie}}</small>
        </div>

        <h2>
            @if(isDetails){
                <a href="#"
                class="flex w-full text-base font-semibold leading-tight text-gray-900 hover:text-greens-800 dark:text-white">
                {{data.nom}}
            </a>
            }@else {
                <a [routerLink]="['details-product',data.id]"
                    class="flex w-full text-base font-semibold leading-tight text-gray-900 hover:text-greens-800 dark:text-white">
                    {{data.nom}}
                </a>
            }
            
        </h2>
        <div class="mt-2 flex items-center gap-2">
            <div class="flex items-center gap-1 text-yellow-300">
                <p-rating
                class="text-yellow-300 flex"
                    [(ngModel)]="data.note"
                    [readonly]="true"
                    iconCancelClass="hidden"
                ></p-rating>
                <p class="text-base font-medium text-gray-900 dark:text-white">{{data.note}}</p>
            </div>
            <p class="text-base font-medium text-gray-500 dark:text-gray-400">({{data.nbrAvis}})</p>
        </div>

        <div class="mt-4 flex items-center justify-between gap-4">
            <div class="flex gap-1">
                <p class="text-base text-gray-900 dark:text-white">{{ data.prix_reduit | currency:'USD':'symbol':'1.0-0'
                    }}</p>
                <p class="text-base text-grays-300 line-through dark:text-white">{{ data.prix_unitaire |
                    currency:'USD':'symbol':'1.0-0' }}</p>
            </div>

            <button type="button" (click)="toggleAddCart(data)" [ngClass]="{'active':isInCart(data)}"
                class="inline-flex items-center rounded-md bg-greens-800 px-2 py-1 font-bold text-small text-white hover:bg-green-hover focus:outline-none focus:ring-4  focus:ring-greens-300">
                @if(!isInCart(data)){
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                        <path
                            d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                    </svg>
                    Add
                }@else{
                    Remove
                }
            </button>
        </div>
    </div>

</div>

<app-view-modal (close)="this.canShowModal = false" [showModal]="this.canShowModal" [item]="this.Products"/>